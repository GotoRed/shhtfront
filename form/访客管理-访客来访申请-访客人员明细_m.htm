<!DOCTYPE html>
<html>
<head>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>访客人员明细-手机子表单</title>
  <!--字段背景风格App模板-->
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8' />
  <meta name="viewport"
    content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
  [#AWSImport]
  <link type='text/css' rel='stylesheet' href='../apps/_bpm.platform/css/colorschemes/scheme_aws.css?v=1588908694729'
    name='schemeCss' />
  <link type='text/css' rel='stylesheet' href='../apps/_bpm.platform/css/theme/theme_m.css?v=1521618657000'
    name='themeCss' />
  <link type='text/css' rel='stylesheet'
    href='../apps/com.actionsoft.apps.form.theme.antdui/css/theme/theme_m.css?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798?v=1589851448798'
    name='themeCss' />
  <link rel="stylesheet" type="text/css"
    href="../apps/com.actionsoft.apps.form.theme.antdui/css/theme/antdui.css?v=1589851448797">
  [#AWSImport]
  [#AWSUIImport]
  <link rel='stylesheet' href='../commons/css/awsui.css?v=1588908650367'>
  <link type='text/css' rel='stylesheet'
    href='../apps/_bpm.platform/css/model/console.m.form.designer.editor.inner.mobile.css?v=1588908673565'>
  <link type='text/css' rel='stylesheet' href='../apps/_bpm.portal/css/client.bpm.form.mobile.common.css?v=1588908698315'>
  <style>
    .mui-bar-tab {
      height: 74px;
    }
    .dialog-slider {
      width: 80vw;
      height: 50vh;
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    .mui-backdrop {
    	z-index: 0 !important;
	
	}
  </style>
  <link type='text/css' rel='stylesheet' id='themeCss'
    href='../apps/com.actionsoft.apps.form.theme.antdui/css/theme/theme_m.css?v=1589851448798?v=1589851448798' name='themeCss' />
<link type='text/css' rel='stylesheet' id='themeCss' href='../apps/com.actionsoft.apps.form.theme.antdui/css/theme/theme_m.css' name='themeCss'/>
</head>
<body style="overflow: hidden;">
<form id="frmMain" name="frmMain" method="post" action="./w">
<div class="awsui-toolbar" border="0">[#ToolBar]</div>
<div id="aws-form-container" class="aws-form-ux-container" border="0" style="min-width: 100%;">
<div id="FormGridRowPage" border="0" style="overflow: auto; width: 100%; margin-bottom: 70px;">
<table id="aws-form-maintable" class="awsui-ux aws-form-ux-maintable" style="min-width: 100%;" align="center" border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr id="aws-form-titlebg" class="aws-form-ux-titlebg">
<td id="aws-form-title" class="aws-form-ux-header">来访人员</td>
</tr>
<tr class="aws-form-ux-formcontent" id="aws-form-formcontent" style="min-width: 100%;">
<td class="">
<table id="table_container" class="awsui-ux table-striped" width="100%" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td class="awsui-ux-title" style="padding-left: 0px;"><label id="VISITORNAMELabel" for="VISITORNAME" flag="labelRequired">访客姓名</label></td>
<td class="aws-form-ux-content">[#VISITORNAME]</td>
</tr>
<tr>
<td class="awsui-ux-title" style="padding-left: 0px;"><label id="VISITORCELLLabel" for="VISITORCELL" flag="labelRequired">手机号码</label></td>
<td class="aws-form-ux-content">[#VISITORCELL]</td>
</tr>
<tr>
<td class="awsui-ux-title" style="padding-left: 0px;"><label id="CERTTYPELabel" for="CERTTYPE" flag="labelRequired">证件类型</label></td>
<td class="aws-form-ux-content">[#CERTTYPE]</td>
</tr>
<tr>
<td class="awsui-ux-title" style="padding-left: 0px;"><label id="CERTNOLabel" for="CERTNO" flag="labelRequired">证件号码</label></td>
<td class="aws-form-ux-content">[#CERTNO]</td>
</tr>
<tr>
<td class="awsui-ux-title" style="padding-left: 0px;"><label id="ABOUTFILELabel" for="ABOUTFILE" flag="labelRequired">健康码,证件照片</label><span class="mui-icon mui-icon-search preview-icon"></span></td>
<td class="aws-form-ux-content">[#ABOUTFILE]</td>
</tr>
<tr>
<td class="awsui-ux-title"><label id="VISITORUNITLabel" class="aws-form-ux-label" for="VISITORUNIT">访客单位</label></td>
<td class="aws-form-ux-content">[#VISITORUNIT]</td>
</tr>
<tr class="tr1" style="display: none;">
<td colspan="2" class="aws-form-ux-gridbg">[#Grid1]</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="aws-form-bottom">
<td class="aws-form-ux-bottom aws-form-ux-actionsoft" style="display: none;">[#Actionsoft]</td>
</tr>
</tbody>
</table>
</div>
<script src="../apps/com.actionsoft.apps.form.theme.antdui/js/commom.form.js?v=1589851448822"></script>
<script src="../apps/com.actionsoft.apps.form.theme.antdui/js/antdui.js?v=1589851448822"></script>
</div>
[#operateButtons]</form>
<div class="mui-slider dialog-slider" border="0">
<div class="mui-slider-group" border="0" style="width: 100%; height: 100%;"></div>
</div>
<div id="boItemNameSearch_div" class="mui-search-div" border="0" style="display: none;"></div>
<script>
  var userTaskDefId =  $(window.parent.userTaskDefId).val();
  console.log(userTaskDefId);
  if(userTaskDefId == 'obj_c970323398a000012e681a307740e300' || userTaskDefId == 'obj_c96b8faf04200001554411a9159c15af'){
  	$('.preview-icon').hide();
  }
    var mask = mui.createMask(
    	() => {
        	$('.dialog-slider').hide();
        }
    );//callback为用户点击蒙版时自动执行的回调；
    var imgSrcArr = [];
    $('#awsuiFile_ABOUTFILE img').each((index, item) => {
      imgSrcArr.push($(item).attr('src'));
      console.log(imgSrcArr);
    })
    imgSrcArr.forEach(item => {
    	$('.mui-slider-group').append('<div class="mui-slider-item"></div>');
    });
    $('.mui-slider-item').each((index,item) => {
      $(item).append(`<img style="height: 100%"  src="${imgSrcArr[index]}">`);
    })
    $('.preview-icon').on('click', function () {
      mask.show();//显示遮罩
      $('.dialog-slider').show();
    })
    function phoneNumCheck () {
      var phoneNum = ui('VISITORCELL');
      var check = /^1[3|4|5|6|7|8|9][0-9]\d{8}$/.test(phoneNum);
      if (!check) {
        ui('VISITORCELL', '');
        mui.alert('请输入正确的手机号码！');
      }
    }
    function idCardCheck () {
      var idCardType = ui('CERTTYPE');
      var idCardNum = ui('CERTNO');
      if (idCardType == '身份证') {
        var check = /^$|^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(idCardNum);
        alert(check)
        if (!check) {
          ui('CERTNO', '');
          mui.alert('请输入正确的身份证号码！')
        }
      }
    }
 // 港澳通行证正则 /^[CW]\d{8}$/
</script>
</body>
</html>